<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>局域网文本互传（极简可行版）</title>
    <style>
        body { max-width: 600px; margin: 20px auto; padding: 0 15px; font-family: sans-serif; }
        .area { margin: 25px 0; }
        textarea { width: 100%; height: 150px; padding: 12px; border: 1px solid #ddd; border-radius: 6px; resize: none; box-sizing: border-box; }
        button { padding: 12px 24px; background: #2563EB; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; }
        #receiveArea { background: #f8f8f8; }
        .tip { color: #666; font-size: 14px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>局域网文本互传</h1>

    <!-- 发送区：输入文本提交 -->
    <div class="area">
        <h3>发送文本</h3>
        <form method="POST" action="">
            <textarea name="text" placeholder="输入要发送的内容..."></textarea>
            <br>
            <button type="submit">发送文本</button>
        </form>
        <div class="tip">👉 另一台设备打开下方局域网地址，即可接收</div>
    </div>

    <!-- 接收区：显示所有提交的文本 -->
    <div class="area" id="receiveArea">
        <h3>接收文本（所有设备提交的内容）</h3>
        <textarea id="receiveText" readonly placeholder="等待接收内容..."></textarea>
        <br>
        <button onclick="document.getElementById('receiveText').value=''">清空接收区</button>
    </div>

    <script>
        // 页面加载时，读取并显示已接收的文本
        window.onload = function() {
            const receiveText = document.getElementById('receiveText');
            // 从服务器获取历史文本（后端会把提交的文本存在本地文件里）
            fetch('?get=1')
                .then(res => res.text())
                .then(data => {
                    receiveText.value = data || '暂无文本';
                });
        };
    </script>
</body>
</html>
